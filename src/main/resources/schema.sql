DROP TABLE IF EXISTS COMMENTS;
DROP TABLE IF EXISTS Users;
DROP TABLE IF EXISTS POSTS;

CREATE TABLE IF NOT EXISTS Users
(
    ID       VARCHAR(255) NOT NULL PRIMARY KEY,
    PASSWORD VARCHAR(255),
    EMAIL    VARCHAR(255),
    NAME     VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS POSTS
(
    ID       BIGINT
        AUTO_INCREMENT
        PRIMARY KEY,
    TITLE    VARCHAR(255),
    WRITER   VARCHAR(255),
    CONTENTS VARCHAR(255),
    DELETED  BOOLEAN DEFAULT FALSE
);

CREATE TABLE IF NOT EXISTS COMMENTS
(
    ID      BIGINT AUTO_INCREMENT PRIMARY KEY,
    POST_ID BIGINT,
    USER_ID VARCHAR(255),
    TEXT    VARCHAR(255),
    DELETED BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (POST_ID) REFERENCES POSTS ON DELETE SET NULL,
    FOREIGN KEY (USER_ID) REFERENCES USERS ON DELETE SET NULL
);


-- User Data Create
INSERT INTO USERS (id, password, name, email)
VALUES ('javajigi', 'test', '자바지기', 'javajigi@slipp.net');
INSERT INTO USERS (id, password, name, email)
VALUES ('sanjigi', 'test', '산지기', 'sanjigi@slipp.net');

-- Post Data Create
INSERT INTO POSTS (TITLE, WRITER, CONTENTS)
VALUES ('JAVAJIGI', 'javajigi', 'hello world');

INSERT INTO POSTS (TITLE, WRITER, CONTENTS)
VALUES ('SANJIGI', 'sanjigi', 'hello2 world2');

INSERT INTO POSTS (TITLE, WRITER, CONTENTS)
VALUES ('JAVAJIGI2', 'javajigi', 'hello world');

-- Comment Data Create
INSERT INTO COMMENTS (POST_ID, USER_ID, TEXT)
VALUES (1, 'sanjigi', 'comment1');

INSERT INTO COMMENTS (POST_ID, USER_ID, TEXT)
VALUES (2, 'javajigi', 'comment2');

INSERT INTO COMMENTS (POST_ID, USER_ID, TEXT)
VALUES (3, 'javajigi', 'comment3-1');

INSERT INTO COMMENTS (POST_ID, USER_ID, TEXT)
VALUES (3, 'javajigi', 'comment3-2');
