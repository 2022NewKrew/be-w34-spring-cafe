DROP TABLE IF EXISTS COMMENT;
DROP TABLE IF EXISTS POST;
DROP TABLE IF EXISTS USER;

CREATE TABLE IF NOT EXISTS USER
(
    ID        BIGINT      NOT NULL AUTO_INCREMENT,
    CREATED   TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
    EMAIL     VARCHAR(30) NOT NULL,
    PASSWORD  VARCHAR(80) NOT NULL,
    NAME      VARCHAR(10) NOT NULL,
    ISDELETED BOOLEAN     NOT NULL default false,
    CONSTRAINT USER_PK PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS POST
(
    ID         BIGINT      NOT NULL AUTO_INCREMENT,
    CREATED    TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
    TITLE      VARCHAR(50) NOT NULL,
    CONTENTS   TEXT        NOT NULL,
    USER_ID    BIGINT      NOT NULL,
    VIEW_COUNT BIGINT      NOT NULL DEFAULT 0,
    ISDELETED  BOOLEAN     NOT NULL default false,
    CONSTRAINT POST_PK PRIMARY KEY (ID),
    CONSTRAINT POST_USER FOREIGN KEY (USER_ID) REFERENCES USER (ID)
);

CREATE TABLE IF NOT EXISTS COMMENT
(
    ID        BIGINT    NOT NULL AUTO_INCREMENT,
    CREATED   TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    POST_ID   BIGINT    NOT NULL,
    USER_ID   BIGINT    NOT NULL,
    CONTENTS  TEXT      NOT NULL,
    ISDELETED BOOLEAN   NOT NULL default false,
    CONSTRAINT COMMENT_PK PRIMARY KEY (ID),
    CONSTRAINT COMMENT_USER FOREIGN KEY (USER_ID) REFERENCES USER (ID),
    CONSTRAINT COMMENT_POST FOREIGN KEY (POST_ID) REFERENCES POST (ID)
);
