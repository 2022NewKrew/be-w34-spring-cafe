USE kakaodb;

CREATE TABLE IF NOT EXISTS MEMBER (
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    EMAIL VARCHAR(50) NOT NULL,
    NICKNAME VARCHAR(50) NOT NULL,
    PASSWORD VARCHAR(50) NOT NULL,
    CREATE_DATE DATE
);

CREATE TABLE IF NOT EXISTS ARTICLE (
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    TITLE VARCHAR(50) NOT NULL,
    CONTENT TEXT NOT NULL,
    CREATE_DATE DATE,
    MEMBER_ID BIGINT,
    DELETED BOOLEAN DEFAULT FALSE,
    FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS REPLY (
    ID BIGINT AUTO_INCREMENT PRIMARY KEY,
    CONTENT TEXT NOT NULL,
    CREATE_DATE_TIME DATETIME,
    ARTICLE_ID BIGINT NOT NULL,
    MEMBER_ID BIGINT NOT NULL,
    DELETED BOOLEAN DEFAULT FALSE,
    FOREIGN KEY(ARTICLE_ID) REFERENCES ARTICLE(ID) ON DELETE CASCADE,
    FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(ID) ON DELETE CASCADE
);

drop table ARTICLE;
drop table MEMBER;
