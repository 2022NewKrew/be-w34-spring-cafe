DROP TABLE IF EXISTS COMMENTS;
DROP TABLE IF EXISTS ARTICLES;
DROP TABLE IF EXISTS USERS;

CREATE TABLE IF NOT EXISTS USERS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    EMAIL VARCHAR(50) NOT NULL,
    PASSWORD VARCHAR(50) NOT NULL,
    NICKNAME VARCHAR(50) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    IS_DELETED BOOLEAN DEFAULT FALSE
);

CREATE TABLE IF NOT EXISTS ARTICLES (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    USER_ID BIGINT NOT NULL,
    TITLE VARCHAR(50) NOT NULL,
    CONTENT VARCHAR(255) NOT NULL,
    VIEW_COUNT BIGINT DEFAULT 0,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    IS_DELETED BOOLEAN DEFAULT FALSE,

    FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

CREATE TABLE IF NOT EXISTS COMMENTS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    USER_ID BIGINT NOT NULL,
    ARTICLE_ID BIGINT NOT NULL,
    CONTENT VARCHAR(255) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    IS_DELETED BOOLEAN DEFAULT FALSE,

    FOREIGN KEY (USER_ID) REFERENCES USERS(ID),
    FOREIGN KEY (ARTICLE_ID) REFERENCES ARTICLES(ID)
);