<!DOCTYPE html>
<html lang="kr">
<head>

    {{>partial/header}}
    <link href="/css/post/show.css" rel="stylesheet">

    <script>
        function deleteReply(replyID) {
            let form = document.getElementById("deleteReplyForm")
            form.action = '{{article.id}}/reply/' + replyID
            form.submit();
        }
    </script>
</head>
<body>

{{>partial/navigation}}


<div class="container" id="main">
    <div class="col-md-12 col-sm-12 col-lg-12" style="display: block">
        <div class="panel panel-default">
            <header class="post-header">
                <p class="post-title">{{article.title}}</p>
            </header>
            <div class="content-main">
                <article class="article">
                    <div class="article-header">
                        <div class="article-header-text">
                            <p class="article-content">{{article.writer}}</p>
                            <p class="article-content">
                                작성일자:{{article.time}}
                            </p>
                            <p class="article-content">조회 {{article.views}}</p>
                        </div>
                    </div>
                    <div class="article-doc">
                        {{article.contents}}
                    </div>
                </article>
                {{#isOwner}}
                <form action="{{article.id}}/delete" method="post">
                    <button class="post-write-btn" onClick="location.href='{{article.id}}/form'" style="float: right">
                        수정
                    </button>
                    <input name="_method" type="hidden" value="DELETE"/>
                    <input class="post-write-btn" style="float: right;background-color: red" type="submit" value="삭제"/>
                </form>
                {{/isOwner}}

                <div class="post-comment">
                    <div class="post-comment-slipp">
                        <p class="post-comment-count">댓글 {{replies.length}}개</p>
                        <div class="post-comment-slipp-articles">
                            {{#replies}}
                            <article class="comment" id="answer-1405">
                                <div class="article-text">
                                    <p class="comment-content comment-author-name">{{writerName}}</p>
                                    <div class="comment-content comment-doc">
                                        <p>{{contents}}</p>
                                        {{#isOwner}}
                                        <button class="post-write-btn" onclick="deleteReply({{id}})"
                                                style="float: right;background-color: red">삭제
                                        </button>
                                        {{/isOwner}}
                                    </div>
                                    <p class="comment-content comment-time">
                                        {{time}}
                                    </p>
                                </div>
                            </article>
                            {{/replies}}
                            <form action="/articles/{{article.id}}/reply/" class="submit-write" method="post">
                                <div class="comment-writer-container">
                                    <input class="comment-writer" id="writer" name="writer" readonly
                                           value="{{sessionUser.userId}}"/>
                                </div>
                                <input name="articleID" readonly type="hidden" value="{{article.id}}"/>
                                <div class="form-group">
                                    <textarea class="form-control" id="contents" name="contents"
                                              placeholder="내용을 입력하세요"></textarea>
                                </div>
                                <input class="post-write-btn" type="submit" value="등록"/>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<form id="deleteReplyForm" method="post">
    <input name="_method" type="hidden" value="DELETE"/>

</form>

{{>partial/footer}}

</body>
</html>
