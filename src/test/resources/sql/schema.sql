CREATE TABLE IF NOT EXISTS USERS (
    id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    user_id VARCHAR NOT NULL UNIQUE,
    password VARCHAR NOT NULL,
    name VARCHAR NOT NULL UNIQUE,
    email VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS ARTICLE (
    id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    author_id BIGINT NOT NULL,
    title VARCHAR NOT NULL,
    contents CLOB,
    created DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    view_count INT DEFAULT 0,
    comment_count INT DEFAULT 0,
    FOREIGN KEY(author_id) REFERENCES USERS(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS REPLY (
    id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    article_id BIGINT NOT NULL,
    author_id BIGINT NOT NULL,
    comment CLOB,
    created DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(article_id) REFERENCES ARTICLE(id) ON DELETE CASCADE,
    FOREIGN KEY(author_id) REFERENCES USERS(id) ON DELETE CASCADE
);